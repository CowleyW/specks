<form [formGroup]="dbForm" (ngSubmit)="onSubmit()" class="flex flex-col h-screen">
  <div class="sticky top-0 z-50 pt-6 pb-4 mb-2 bg-white shadow">
    <h1
      class="bg-gradient-to-br from-indigo-400 to-cyan-400 text-transparent bg-clip-text text-6xl font-bold text-center py-1">
      Specks
    </h1>
    <h2 class="text-xl font-medium text-center">
      Generate comprehensive test datasets easily.
    </h2>

    <div class="flex justify-center pt-2">
      <select formControlName="outputFormat" id="outputFormat" class="border-2 rounded px-1 text-lg font-medium">
        <option *ngFor="let format of Format | keyvalue" [value]="format.key">{{ format.value }}</option>
      </select>

      <button type="submit" (click)="onPreviewClick()" class="border-2 rounded hover:bg-gray-200 px-4 py-2 mx-2 text-lg font-medium">Preview
      </button>
      <button type="submit" (click)="onGenerateClick()" class="bg-sky-500 hover:bg-cyan-600 text-white text-lg font-medium rounded px-4 py-2">
        Generate Data
      </button>
    </div>
  </div>

  <div formArrayName="tables" class="grow my-2 flex">
    <div>
      <div class="mr-auto" *ngFor="let table of tables.getTables(); let ti = index">
        <app-schema-entry [table]="table" [tableIdx]="ti"/>
      </div>

      <button type="button" (click)="tables.addNewTable()"
              class="text-white font-medium bg-sky-500 hover:bg-cyan-600 rounded px-4 py-2 ml-2 my-4">Add Table
      </button>
    </div>
  </div>

  <div *ngIf="previewData" class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left sm:flex sm:items-start">
                <div class="mt-2 flex flex-grow">
                  <p class="text-sm text-gray-500 whitespace-pre max-h-96 overflow-scroll w-full">{{ previewData | json }}</p>
                </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="button" (click)="clearPreview()" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="bg-gradient-to-br from-indigo-400 to-cyan-400 sticky bottom-0 z-50">
    <div class="w-full mx-auto my-2 flex justify-between">
      <span class="text-white text-lg px-2 font-medium">Specks.dev</span>

      <ul class="flex flex-wrap items-center px-2">
        <li>
          <a href="https://github.com/CowleyW/specks" class="text-white">Github</a>
        </li>
      </ul>
    </div>
  </footer>
</form>
